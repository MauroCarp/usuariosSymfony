{% extends 'base.html.twig' %}

{% block body %}

    <div class="wrapper">

        <div class="content-wrapper">

            <section class="content-header">

                <h1>

                    Gesti&oacute;n de Usuarios

                </h1>

                {% for message in app.flashes('success') %}
                    <div class="alert alert-success">
                        {{ message }}
                    </div>
                {% endfor %}

            </section>

            <section class="content">

                <div class="box">

                    <div class="box-header with-border">

                        <button type="button" class="btn btn-primary" id="btn-agregar-usuario">

                            Agregar usuario

                        </button>


                    </div>
                    <br>

                    <div class="box-header with-border d-none" id="form-nuevo-usuario">

                        <div class="container h-100 ">

                            <div class="flex-row flex-wrap">

                                {{ form(newUserForm) }}

                            </div>

                        </div>

                    </div>

                    <div class="box-header with-border d-none" id="form-editar-usuario">

                        <div class="container h-100 ">

                            <div class="flex-row flex-wrap">

                                {{ form(editUserForm) }}

                            </div>

                        </div>

                    </div>

                    <div class="box-body">

                        <table class="table table-bordered table-striped dt-responsive tablaUsuarios">

                            <thead>

                            <tr>

                                <th>Nombre</th>
                                <th>Apellidos</th>
                                <th>Fecha de Nacimiento</th>
                                <th>Sexo</th>
                                <th>Estado</th>
                                <th></th>

                            </tr>

                            </thead>

                            <tbody>
                            {% for usuario in usuarios %}
                                <tr>

                                    <td> {{ usuario.nombre }} </td>
                                    <td> {{ usuario.apellidos }} </td>
                                    <td> {{ usuario.fechaNacimiento|date('Y-m-d') }}</td>
                                    <td> {{ usuario.sexo == 'M' ? 'Masculino' : 'Femenino'}} </td>
                                    <td>

                                        {% if usuario.estado == false %}
                                            <span class='badge bg-danger btnEstado' idUsuario='{{ usuario.id }}' estadoUsuario='{{ usuario.estado }}'>Baja</span>
                                        {% else %}
                                            <span class='badge bg-success btnEstado' idUsuario='{{ usuario.id }}' estadoUsuario='{{ usuario.estado }}'>Alta</span>
                                        {% endif %}

                                    </td>

                                    <td>

                                        <div class='btn-group'><button class='btn btn-warning btnEditarUsuario' idusuario="{{ usuario.id }}"><i class="bi bi-pencil-square"></i></button><button class='btn btn-danger btnEliminarUsuario' idUsuario='{{  usuario.id }}'><i class="bi bi-trash"></i>
                                            </button></div>

                                    </td>

                                </tr>
                            {% endfor %}

                            </tbody>

                        </table>

                    </div>

                </div>

            </section>

        </div>

    </div>

{% endblock %}
